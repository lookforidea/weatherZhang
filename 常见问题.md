# 常见问题 FAQ

## 编译相关

### Q1: 编译时提示"SDK location not found"
**A**: 需要配置Android SDK路径。

**解决方法**:
```bash
# 创建 local.properties 文件
echo "sdk.dir=/path/to/your/Android/Sdk" > local.properties

# 或者设置环境变量
export ANDROID_HOME=/path/to/your/Android/Sdk
```

### Q2: Gradle同步失败
**A**: 可能是网络问题或Gradle版本问题。

**解决方法**:
```bash
# 清理并重新构建
./gradlew clean
./gradlew build --refresh-dependencies

# 或者删除Gradle缓存
rm -rf ~/.gradle/caches/
```

### Q3: 编译时内存不足
**A**: 增加Gradle的内存配置。

**解决方法**:
在 `gradle.properties` 中添加：
```properties
org.gradle.jvmargs=-Xmx4096m -Dfile.encoding=UTF-8
```

### Q4: Java版本不兼容
**A**: 项目需要JDK 17或更高版本。

**解决方法**:
```bash
# 检查Java版本
java -version

# 如果版本不对，安装JDK 17
# 或设置JAVA_HOME
export JAVA_HOME=/path/to/jdk-17
```

## 运行相关

### Q5: 应用无法安装
**A**: 可能是签名问题或系统版本不兼容。

**解决方法**:
- 确保Android版本 >= 7.0
- 启用"未知来源"安装
- 卸载旧版本后重新安装
- 检查存储空间是否充足

### Q6: 应用安装后闪退
**A**: 可能是依赖库问题或系统兼容性问题。

**解决方法**:
```bash
# 查看崩溃日志
adb logcat | grep AndroidRuntime

# 清除应用数据
adb shell pm clear com.weather.app

# 重新安装
adb install -r app/build/outputs/apk/debug/app-debug.apk
```

### Q7: 无法获取天气数据
**A**: 网络问题或API问题。

**解决方法**:
1. 检查网络连接
2. 确认允许应用使用网络
3. 测试API是否可访问：
```bash
curl "https://api.map.baidu.com/weather/v1/?district_id=350602&data_type=all&ak=BgFd8iVrd6YSViXfEvgkeee9pFmAYqkD"
```
4. 检查API Key是否有效

### Q8: 数据显示不完整
**A**: API返回数据问题或解析错误。

**解决方法**:
```bash
# 查看网络请求日志
adb logcat | grep OkHttp

# 检查数据解析
adb logcat | grep Gson
```

## 开发相关

### Q9: 如何修改API Key
**A**: 在 `MainActivity.java` 中修改。

**位置**:
```java
private static final String API_KEY = "你的新KEY";
```

### Q10: 如何添加更多城市
**A**: 添加新的区域ID和相应的UI组件。

**步骤**:
1. 在 `MainActivity.java` 中添加新的常量
2. 在布局文件中添加新的卡片
3. 添加对应的视图和适配器
4. 在 `onCreate` 中调用加载方法

### Q11: 如何自定义界面颜色
**A**: 修改 `colors.xml` 文件。

**位置**: `app/src/main/res/values/colors.xml`
```xml
<color name="purple_500">#FF6200EE</color>
<color name="purple_700">#FF3700B3</color>
```

### Q12: 如何修改应用名称
**A**: 修改 `strings.xml` 文件。

**位置**: `app/src/main/res/values/strings.xml`
```xml
<string name="app_name">新的应用名称</string>
```

### Q13: 如何添加下拉刷新功能
**A**: 使用 SwipeRefreshLayout。

**示例代码**:
```xml
<androidx.swiperefreshlayout.widget.SwipeRefreshLayout
    android:id="@+id/swipe_refresh"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <!-- 原有的ScrollView -->
</androidx.swiperefreshlayout.widget.SwipeRefreshLayout>
```

### Q14: 如何更换应用图标
**A**: 参考 `ICON_README.md`。

**方法**:
1. 使用Android Studio的Image Asset工具
2. 或手动替换各分辨率的图标文件
3. 放在 `res/mipmap-*` 目录下

## 网络相关

### Q15: HTTPS证书验证失败
**A**: 已配置网络安全策略。

**配置文件**: `app/src/main/res/xml/network_security_config.xml`

### Q16: 网络请求超时
**A**: 调整超时时间。

**位置**: `ApiClient.java`
```java
.connectTimeout(30, TimeUnit.SECONDS)
.readTimeout(30, TimeUnit.SECONDS)
```

### Q17: 如何添加网络缓存
**A**: 配置OkHttp缓存。

**示例**:
```java
Cache cache = new Cache(context.getCacheDir(), 10 * 1024 * 1024); // 10MB
OkHttpClient client = new OkHttpClient.Builder()
    .cache(cache)
    .build();
```

## 性能相关

### Q18: 应用占用内存过大
**A**: 优化图片加载和数据结构。

**建议**:
- 使用Glide或Picasso加载图片
- 及时释放不用的资源
- 避免内存泄漏

### Q19: 列表滚动卡顿
**A**: 优化RecyclerView。

**建议**:
- 使用ViewHolder模式（已实现）
- 减少onBindViewHolder中的操作
- 使用DiffUtil更新数据

### Q20: 启动速度慢
**A**: 优化启动流程。

**建议**:
- 延迟加载非必要组件
- 使用异步初始化
- 减少Application中的操作

## 发布相关

### Q21: 如何生成Release版本
**A**: 使用以下命令：
```bash
./gradlew assembleRelease
```

### Q22: Release版本需要签名吗
**A**: 是的，需要配置签名。

**步骤**:
1. 生成密钥文件
2. 在 `build.gradle` 中配置签名
3. 编译Release版本

### Q23: 如何混淆代码
**A**: 启用ProGuard。

**配置**: 在 `build.gradle` 中：
```gradle
buildTypes {
    release {
        minifyEnabled true
        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt')
    }
}
```

### Q24: 如何上传到应用商店
**A**: 不同应用商店有不同要求。

**一般步骤**:
1. 准备应用描述和截图
2. 生成签名的Release版本
3. 准备隐私政策
4. 提交审核

## 其他问题

### Q25: 如何查看应用日志
**A**: 使用adb logcat。
```bash
adb logcat | grep com.weather.app
```

### Q26: 如何调试网络请求
**A**: 已配置OkHttp日志拦截器。
```bash
adb logcat | grep OkHttp
```

### Q27: 支持离线使用吗
**A**: 当前版本不支持，需要网络连接。

**改进建议**:
- 添加本地数据库缓存
- 使用Room或SQLite
- 实现数据持久化

### Q28: 能否添加定位功能
**A**: 可以添加。

**建议**:
- 使用百度定位SDK
- 或使用系统定位服务
- 需要添加定位权限

### Q29: 如何贡献代码
**A**: 项目开源，欢迎贡献。

**步骤**:
1. Fork项目
2. 创建功能分支
3. 提交修改
4. 发起Pull Request

### Q30: 遇到其他问题怎么办
**A**: 可以通过以下方式获取帮助：

1. 查看项目文档
2. 搜索相关错误信息
3. 查看Android官方文档
4. 在GitHub提Issue
5. 查看logcat日志分析问题

## 联系方式

如果以上FAQ无法解决您的问题，请：
- 查看详细文档：`README.md`、`编译说明.md`
- 查看测试指南：`测试指南.md`
- 查看项目结构：`项目结构.md`
