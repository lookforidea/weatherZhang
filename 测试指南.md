# 测试指南

## 测试环境

### 推荐测试设备
- Android 7.0 - 14.0 设备
- 至少 2GB RAM
- 稳定的网络连接

### 测试工具
- Android Debug Bridge (adb)
- Android Studio Logcat
- 网络监控工具

## 功能测试

### 1. 应用启动测试

**测试步骤**:
1. 点击应用图标
2. 观察启动画面
3. 检查是否正常进入主界面

**预期结果**:
- 应用正常启动
- 无闪退或卡顿
- 显示两个加载进度条

### 2. 天气数据加载测试

**测试步骤**:
1. 启动应用
2. 等待数据加载
3. 检查显示内容

**预期结果**:
- 芗城区天气数据正常显示
- 龙文区天气数据正常显示
- 显示当前温度、天气状况、风向、湿度
- 显示7天天气预报列表

### 3. 网络错误处理测试

**测试步骤**:
1. 关闭设备网络
2. 启动应用
3. 观察错误提示

**预期结果**:
- 显示网络错误提示
- 不会闪退
- Toast提示错误信息

### 4. 数据格式测试

**测试项目**:
- 日期格式：MM月dd日 星期X
- 温度格式：XX°
- 风力格式：方向 X级
- 湿度格式：湿度: XX%

**预期结果**:
- 所有数据格式正确
- 中文显示正常
- 数字和单位正确

### 5. 列表滚动测试

**测试步骤**:
1. 滑动7天天气预报列表
2. 检查滚动流畅度
3. 检查列表项显示

**预期结果**:
- 滚动流畅，无卡顿
- 所有列表项正常显示
- 数据无重复或错乱

## 兼容性测试

### Android版本测试

测试以下Android版本：
- ✓ Android 7.0 (API 24)
- ✓ Android 8.0 (API 26)
- ✓ Android 9.0 (API 28)
- ✓ Android 10 (API 29)
- ✓ Android 11 (API 30)
- ✓ Android 12 (API 31)
- ✓ Android 13 (API 33)
- ✓ Android 14 (API 34)

### 屏幕尺寸测试

测试以下屏幕尺寸：
- 小屏幕 (4.0" - 5.0")
- 中屏幕 (5.0" - 6.0")
- 大屏幕 (6.0" - 7.0")
- 平板 (7.0"+)

### 屏幕方向测试

**测试步骤**:
1. 竖屏模式运行应用
2. 旋转到横屏模式
3. 再旋转回竖屏

**预期结果**:
- 界面正常适配
- 数据不丢失
- 无布局错乱

## 性能测试

### 启动时间测试

**测试方法**:
```bash
adb shell am start -W com.weather.app/.MainActivity
```

**预期结果**:
- 冷启动 < 3秒
- 热启动 < 1秒

### 内存使用测试

**测试方法**:
```bash
adb shell dumpsys meminfo com.weather.app
```

**预期结果**:
- 初始内存 < 100MB
- 运行稳定，无内存泄漏

### 网络流量测试

**测试内容**:
- 单次数据请求流量
- 总体网络消耗

**预期结果**:
- 单次请求 < 50KB
- 合理的网络使用

## API测试

### 测试API端点

**芗城区**:
```bash
curl "https://api.map.baidu.com/weather/v1/?district_id=350602&data_type=all&ak=BgFd8iVrd6YSViXfEvgkeee9pFmAYqkD"
```

**龙文区**:
```bash
curl "https://api.map.baidu.com/weather/v1/?district_id=350603&data_type=all&ak=BgFd8iVrd6YSViXfEvgkeee9pFmAYqkD"
```

**预期结果**:
- 返回状态码 200
- 返回有效的JSON数据
- 包含天气信息和7天预报

## 日志查看

### 查看应用日志

```bash
# 查看所有日志
adb logcat | grep WeatherApp

# 查看错误日志
adb logcat *:E | grep com.weather.app

# 清除日志
adb logcat -c
```

### 查看网络请求

```bash
adb logcat | grep OkHttp
```

## 常见问题排查

### 问题1: 数据无法加载

**排查步骤**:
1. 检查网络连接
2. 检查API Key是否有效
3. 查看logcat日志
4. 测试API端点

### 问题2: 界面显示异常

**排查步骤**:
1. 检查布局文件
2. 检查数据绑定
3. 查看适配器代码
4. 测试不同屏幕尺寸

### 问题3: 应用崩溃

**排查步骤**:
1. 查看崩溃日志
```bash
adb logcat | grep AndroidRuntime
```
2. 检查空指针异常
3. 检查数据解析错误
4. 验证API响应格式

## 自动化测试

### 单元测试

```bash
./gradlew test
```

### UI测试

```bash
./gradlew connectedAndroidTest
```

## 测试报告

### 记录测试结果

对每项测试记录：
- 测试时间
- 测试环境
- 测试结果（通过/失败）
- 发现的问题
- 截图或日志

### 问题追踪

发现问题时记录：
- 问题描述
- 复现步骤
- 预期行为 vs 实际行为
- 设备信息
- 日志信息

## 发布前检查清单

- [ ] 所有功能正常工作
- [ ] 无崩溃或严重bug
- [ ] 界面显示正常
- [ ] 多设备测试通过
- [ ] 性能测试达标
- [ ] 网络请求正常
- [ ] 权限配置正确
- [ ] 图标资源完整
- [ ] 版本号正确
- [ ] 签名配置完成
